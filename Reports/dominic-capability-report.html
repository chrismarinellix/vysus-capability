<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dominic Moncada Capability Analysis - Vysus Group</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        :root {
            --vysus-stockholm-neon: #00E3A9;
            --vysus-malmo-green: #005454;
            --vysus-white: #FFFFFF;
            --vysus-oslo-snow: #F8F8F8;
            --vysus-stavanger-ice: #EDEDED;
            --vysus-bergen-rain: #DADADA;
            --vysus-scandinavia-rock: #485559;
            --vysus-trondheim-night: #1D1D1B;
            --vysus-bath-sky: #4B81EF;
            --vysus-orlando-red: #F92D63;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Suisse International', Arial, sans-serif;
            background: var(--vysus-oslo-snow);
            color: var(--vysus-trondheim-night);
            line-height: 1.4;
        }

        .header {
            background: var(--vysus-malmo-green);
            padding: 25px 40px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -80px;
            right: -50px;
            width: 300px;
            height: 300px;
            background: var(--vysus-stockholm-neon);
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            opacity: 0.2;
            transform: rotate(15deg);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo svg {
            width: 40px;
            height: 40px;
        }

        .logo svg path { fill: var(--vysus-stockholm-neon); }

        .logo-text {
            color: var(--vysus-white);
            font-size: 20px;
            font-weight: 300;
        }

        .header-title {
            color: var(--vysus-white);
            text-align: right;
        }

        .header-title h1 {
            font-size: 24px;
            font-weight: 300;
        }

        .header-title p {
            font-size: 13px;
            opacity: 0.8;
        }

        .main-content {
            padding: 30px 40px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .profile-bar {
            background: var(--vysus-white);
            border-radius: 8px;
            padding: 20px 25px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--vysus-bath-sky);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .profile-name {
            font-size: 28px;
            font-weight: 400;
            color: var(--vysus-malmo-green);
        }

        .self-assessment-badge {
            background: var(--vysus-bath-sky);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            margin-left: 15px;
            vertical-align: middle;
        }

        .profile-meta {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .meta-item {
            text-align: center;
        }

        .meta-value {
            font-size: 22px;
            font-weight: 300;
            color: var(--vysus-malmo-green);
        }

        .meta-label {
            font-size: 10px;
            color: var(--vysus-scandinavia-rock);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .chart-card {
            background: var(--vysus-white);
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 400;
            color: var(--vysus-malmo-green);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--vysus-stockholm-neon);
        }

        .scatter-plot {
            position: relative;
            height: 450px;
            border-left: 2px solid var(--vysus-bergen-rain);
            border-bottom: 2px solid var(--vysus-bergen-rain);
            margin: 20px 30px 50px 70px;
        }

        .axis-label {
            position: absolute;
            font-size: 11px;
            color: var(--vysus-scandinavia-rock);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .axis-label.y-axis {
            left: -60px;
            top: 50%;
            transform: rotate(-90deg) translateX(50%);
            transform-origin: left center;
            white-space: nowrap;
        }

        .axis-label.x-axis {
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
        }

        .grid-line {
            position: absolute;
            background: var(--vysus-stavanger-ice);
        }

        .grid-line.horizontal {
            width: 100%;
            height: 1px;
        }

        .tick-label {
            position: absolute;
            font-size: 10px;
            color: var(--vysus-scandinavia-rock);
        }

        .tick-label.y {
            left: -25px;
            transform: translateY(-50%);
        }

        .tick-label.x {
            bottom: -25px;
            transform: translateX(-50%) rotate(-45deg);
            transform-origin: top center;
            white-space: nowrap;
            font-size: 9px;
        }

        .data-point {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .data-point:hover {
            transform: translate(-50%, -50%) scale(1.6);
            z-index: 20;
        }

        .data-point.current {
            background: var(--vysus-stockholm-neon);
            border: 2px solid var(--vysus-malmo-green);
        }

        .data-point.previous {
            background: var(--vysus-bergen-rain);
            border: 2px solid var(--vysus-scandinavia-rock);
            opacity: 0.5;
        }

        .data-point.new-skill {
            background: var(--vysus-bath-sky);
            border: 2px solid #061066;
        }

        .data-point.upgraded {
            background: var(--vysus-stockholm-neon);
            border: 2px solid var(--vysus-malmo-green);
            box-shadow: 0 0 8px rgba(0, 227, 169, 0.5);
        }

        .tooltip {
            position: absolute;
            background: var(--vysus-trondheim-night);
            color: var(--vysus-white);
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 11px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 100;
            transform: translate(-50%, -100%);
            margin-top: -10px;
        }

        .tooltip::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: var(--vysus-trondheim-night);
            border-bottom: none;
        }

        .reference-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: repeating-linear-gradient(
                90deg,
                var(--vysus-scandinavia-rock) 0px,
                var(--vysus-scandinavia-rock) 5px,
                transparent 5px,
                transparent 10px
            );
            opacity: 0.4;
        }

        .reference-label {
            position: absolute;
            right: 5px;
            font-size: 9px;
            color: var(--vysus-scandinavia-rock);
            background: var(--vysus-white);
            padding: 2px 5px;
            transform: translateY(-50%);
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--vysus-stavanger-ice);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: var(--vysus-scandinavia-rock);
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .legend-dot.current { background: var(--vysus-stockholm-neon); border: 2px solid var(--vysus-malmo-green); }
        .legend-dot.previous { background: var(--vysus-bergen-rain); border: 2px solid var(--vysus-scandinavia-rock); }
        .legend-dot.new-skill { background: var(--vysus-bath-sky); border: 2px solid #061066; }
        .legend-dot.upgraded { background: var(--vysus-stockholm-neon); border: 2px solid var(--vysus-malmo-green); box-shadow: 0 0 4px rgba(0, 227, 169, 0.5); }

        .role-alignment {
            margin-top: 15px;
        }

        .role-card {
            background: var(--vysus-oslo-snow);
            border-radius: 6px;
            padding: 12px 15px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 130px 1fr auto;
            align-items: center;
            gap: 15px;
        }

        .role-name {
            font-size: 12px;
            font-weight: 500;
            color: var(--vysus-malmo-green);
        }

        .role-bar {
            height: 8px;
            background: var(--vysus-stavanger-ice);
            border-radius: 4px;
            position: relative;
        }

        .role-fill {
            height: 100%;
            background: var(--vysus-stockholm-neon);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .role-threshold {
            position: absolute;
            top: -3px;
            width: 2px;
            height: 14px;
            background: var(--vysus-malmo-green);
        }

        .role-percent {
            font-size: 13px;
            font-weight: 500;
            color: var(--vysus-scandinavia-rock);
            min-width: 45px;
            text-align: right;
        }

        .role-percent.exceeds {
            color: var(--vysus-malmo-green);
        }

        .category-summary {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
        }

        .category-card {
            background: var(--vysus-oslo-snow);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
        }

        .category-name {
            font-size: 11px;
            color: var(--vysus-scandinavia-rock);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .category-stats {
            display: flex;
            justify-content: center;
            gap: 8px;
        }

        .cat-stat {
            text-align: center;
        }

        .cat-stat-value {
            font-size: 18px;
            font-weight: 300;
            color: var(--vysus-malmo-green);
        }

        .cat-stat-label {
            font-size: 9px;
            color: var(--vysus-scandinavia-rock);
        }

        .progress-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .progress-section h4 {
            font-size: 13px;
            color: var(--vysus-malmo-green);
            margin-bottom: 12px;
            font-weight: 500;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 11px;
        }

        .progress-badge {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 500;
            flex-shrink: 0;
        }

        .progress-badge.l1 { background: var(--vysus-bergen-rain); color: var(--vysus-scandinavia-rock); }
        .progress-badge.l2 { background: var(--vysus-stockholm-neon); color: var(--vysus-malmo-green); }
        .progress-badge.new { background: var(--vysus-bath-sky); color: white; }

        .progress-name {
            flex: 1;
            color: var(--vysus-trondheim-night);
        }

        .prior-exp {
            background: var(--vysus-oslo-snow);
            padding: 15px 20px;
            border-radius: 6px;
            margin-top: 20px;
        }

        .prior-exp h4 {
            color: var(--vysus-malmo-green);
            font-size: 13px;
            margin-bottom: 10px;
        }

        .exp-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .exp-tag {
            background: var(--vysus-white);
            border: 1px solid var(--vysus-bergen-rain);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 11px;
            color: var(--vysus-scandinavia-rock);
        }

        .footer {
            background: var(--vysus-trondheim-night);
            color: var(--vysus-white);
            padding: 20px 40px;
            text-align: center;
        }

        .tagline {
            color: var(--vysus-stockholm-neon);
            font-size: 14px;
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        .footer p {
            font-size: 12px;
            opacity: 0.7;
        }

        .heatmap {
            display: grid;
            grid-template-columns: 150px repeat(3, 1fr);
            gap: 2px;
            font-size: 10px;
        }

        .heatmap-header {
            background: var(--vysus-malmo-green);
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: 500;
        }

        .heatmap-row-header {
            background: var(--vysus-oslo-snow);
            padding: 8px;
            text-align: right;
            color: var(--vysus-scandinavia-rock);
        }

        .heatmap-cell {
            padding: 8px;
            text-align: center;
            font-weight: 500;
        }

        .heatmap-cell.empty { background: var(--vysus-stavanger-ice); color: var(--vysus-bergen-rain); }
        .heatmap-cell.low { background: #fee; color: #c44; }
        .heatmap-cell.med { background: #ffd; color: #a80; }
        .heatmap-cell.high { background: #dfd; color: #080; }

        /* Bar Chart Visualisation Styles */
        .viz-toggle { display: flex; gap: 10px; margin-bottom: 20px; }
        .viz-btn { padding: 8px 16px; border: 2px solid var(--vysus-bergen-rain); background: var(--vysus-white); color: var(--vysus-scandinavia-rock); cursor: pointer; border-radius: 6px; font-size: 0.85rem; transition: all 0.2s; }
        .viz-btn:hover { border-color: var(--vysus-stockholm-neon); }
        .viz-btn.active { background: var(--vysus-stockholm-neon); border-color: var(--vysus-stockholm-neon); color: var(--vysus-malmo-green); font-weight: bold; }
        .bar-chart-viz { display: flex; flex-direction: column; gap: 6px; max-height: 500px; overflow-y: auto; }
        .bar-row-viz { display: grid; grid-template-columns: 200px 1fr 50px; align-items: center; gap: 12px; padding: 5px 0; }
        .bar-row-viz:hover { background: var(--vysus-oslo-snow); }
        .bar-label-viz { font-size: 10px; color: var(--vysus-trondheim-night); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .bar-container-viz { height: 18px; background: var(--vysus-stavanger-ice); border-radius: 3px; position: relative; overflow: visible; }
        .bar-fill-viz { height: 100%; border-radius: 3px; transition: width 0.5s ease; }
        .bar-fill-viz.l1 { background: var(--vysus-bergen-rain); }
        .bar-fill-viz.l2 { background: var(--vysus-stockholm-neon); }
        .bar-fill-viz.l3 { background: var(--vysus-malmo-green); }
        .bar-previous-viz { position: absolute; top: 0; height: 100%; border-right: 3px solid var(--vysus-scandinavia-rock); opacity: 0.6; z-index: 1; }
        .bar-goal-viz { position: absolute; top: -3px; height: calc(100% + 6px); border-right: 3px dashed #F39C12; z-index: 2; }
        .bar-value-viz { font-size: 11px; font-weight: bold; color: var(--vysus-malmo-green); text-align: center; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const VysusLogo = () => (
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M91.9 37.2 L100.0 60.6 L100.0 37.2 Z" />
                <path d="M27.6 37.4 L25.7 38.1 L23.8 39.2 L22.2 40.7 L21.3 42.0 L20.4 43.8 L19.8 45.9 L19.7 47.9 L20.0 49.7 L20.7 51.8 L21.6 53.4 L22.9 54.9 L24.5 56.2 L26.0 57.0 L28.2 57.6 L30.0 57.7 L30.0 37.2 Z" />
                <path d="M0.0 37.2 L11.6 70.8 L25.5 70.8 L13.9 37.2 Z" />
            </svg>
        );

        // Dominic's competency data from spreadsheet
        const technicalCodes = [
            { id: 1, name: "Load Flow Analysis", category: "Studies", old: 2, new: 2 },
            { id: 2, name: "Dynamic Studies (PSS/E)", category: "Studies", old: 2, new: 2 },
            { id: 3, name: "Dynamic Studies (PSCAD)", category: "Studies", old: 1, new: 2 },
            { id: 4, name: "Dynamic Studies (PowerFactory)", category: "Studies", old: 1, new: 1 },
            { id: 5, name: "Dynamic Studies (ETAP)", category: "Studies", old: null, new: 1 },
            { id: 6, name: "Wide Area Operations", category: "Operations", old: 1, new: 2 },
            { id: 7, name: "Short Circuit & Fault", category: "Studies", old: 1, new: 2 },
            { id: 8, name: "Unit Protection", category: "Protection", old: 1, new: 1 },
            { id: 9, name: "Network Protection", category: "Protection", old: 1, new: 1 },
            { id: 10, name: "Insulation Coordination", category: "Studies", old: 1, new: 1 },
            { id: 11, name: "Power Quality Analysis", category: "Quality", old: 1, new: 1 },
            { id: 12, name: "Model Dev (PSS/E)", category: "Modelling", old: 1, new: 2 },
            { id: 13, name: "Model Dev (PSCAD)", category: "Modelling", old: 1, new: 2 },
            { id: 14, name: "Model Dev (PowerFactory)", category: "Modelling", old: null, new: 1 },
            { id: 15, name: "Model Dev (Sincal)", category: "Modelling", old: null, new: 1 },
            { id: 16, name: "Model Dev (ETAP)", category: "Modelling", old: null, new: 1 },
            { id: 17, name: "Test Plan Development", category: "Testing", old: 1, new: 1 },
            { id: 18, name: "Equipment On-Site Testing", category: "Testing", old: 1, new: 2 },
            { id: 19, name: "Front End Design (Substation)", category: "Design", old: null, new: 1 },
            { id: 20, name: "Front End Design (Wind)", category: "Design", old: null, new: 1 },
            { id: 21, name: "Front End Design (Solar)", category: "Design", old: null, new: 1 },
            { id: 22, name: "Front End Design (Storage)", category: "Design", old: null, new: 1 },
            { id: 23, name: "NEM Market Rules", category: "Regulatory", old: null, new: 1 },
            { id: 24, name: "NEM Connection Process", category: "Regulatory", old: 1, new: 2 },
            { id: 25, name: "NEM Generator Tech Req.", category: "Regulatory", old: 1, new: 2 },
            { id: 26, name: "NEM Model Guidelines", category: "Regulatory", old: 1, new: 2 },
            { id: 27, name: "Wind Plant Performance", category: "Plant Tech", old: 1, new: 2 },
            { id: 28, name: "Solar Plant Performance", category: "Plant Tech", old: 1, new: 2 },
            { id: 29, name: "Storage Plant Performance", category: "Plant Tech", old: 1, new: 2 },
            { id: 30, name: "FACTS Plant Performance", category: "Plant Tech", old: 1, new: 1 },
            { id: 31, name: "HVDC Plant Performance", category: "Plant Tech", old: 1, new: 1 },
            { id: 32, name: "Control System Dynamics", category: "Controls", old: null, new: 1 },
            { id: 33, name: "Scripting & Automation", category: "Automation", old: 1, new: 2 },
            { id: 34, name: "Commercial Analysis", category: "Commercial", old: null, new: 1 },
            { id: 35, name: "Cost Modelling", category: "Commercial", old: null, new: 1 },
            { id: 36, name: "Client & Project Mgmt", category: "Management", old: 1, new: 2 }
        ];

        const activityCodes = [
            { id: 37, name: "Generator Connection (NEM)", category: "Studies", old: 1, new: 2 },
            { id: 38, name: "Generator Perf. Standards", category: "Regulatory", old: 1, new: 2 },
            { id: 39, name: "Generator Design (Wind)", category: "Design", old: 1, new: 1 },
            { id: 40, name: "Generator Design (Solar)", category: "Design", old: 1, new: 1 },
            { id: 41, name: "Generator Design (Thermal)", category: "Design", old: 1, new: 1 },
            { id: 42, name: "Gen. Commissioning (Wind)", category: "Commissioning", old: 1, new: 1 },
            { id: 43, name: "Gen. Commissioning (Solar)", category: "Commissioning", old: 1, new: 1 },
            { id: 44, name: "Gen. Commissioning (Thermal)", category: "Commissioning", old: 1, new: 1 },
            { id: 45, name: "Generator R2 Validation", category: "Validation", old: 1, new: 1 },
            { id: 46, name: "Storage Connection (NEM)", category: "Studies", old: 1, new: 2 },
            { id: 47, name: "Storage Perf. Standards", category: "Regulatory", old: 1, new: 2 },
            { id: 48, name: "Storage Front End Design", category: "Design", old: 1, new: 1 },
            { id: 49, name: "Storage Commissioning", category: "Commissioning", old: 1, new: 1 },
            { id: 50, name: "Storage R2 Validation", category: "Validation", old: 1, new: 1 },
            { id: 51, name: "Industrial Steady State", category: "Industrial", old: null, new: 1 },
            { id: 52, name: "Industrial Protection", category: "Industrial", old: null, new: 1 },
            { id: 53, name: "Motor Start Studies", category: "Industrial", old: null, new: 1 },
            { id: 54, name: "Industrial Power Quality", category: "Industrial", old: null, new: 1 },
            { id: 55, name: "Load Shedding/Islanding", category: "Industrial", old: null, new: 1 },
            { id: 56, name: "Industrial Root Cause", category: "Industrial", old: null, new: 1 },
            { id: 57, name: "Wind Model Dev (PSS/E)", category: "Modelling", old: 1, new: 2 },
            { id: 58, name: "Solar Model Dev (PSS/E)", category: "Modelling", old: 1, new: 2 },
            { id: 59, name: "Solar Model Dev (PSCAD)", category: "Modelling", old: 1, new: 2 },
            { id: 60, name: "Storage Model Dev (PSS/E)", category: "Modelling", old: 1, new: 2 },
            { id: 61, name: "Storage Model Dev (PSCAD)", category: "Modelling", old: 1, new: 2 },
            { id: 62, name: "PPC Model Dev (PSS/E)", category: "Modelling", old: 1, new: 2 },
            { id: 63, name: "PPC Model Dev (PSCAD)", category: "Modelling", old: 1, new: 2 },
            { id: 64, name: "Model Benchmarking", category: "Validation", old: 1, new: 1 },
            { id: 65, name: "Model Validation", category: "Validation", old: 1, new: 1 },
            { id: 66, name: "Base Case Assembly", category: "Modelling", old: 1, new: 2 },
            { id: 67, name: "Constraint Analysis", category: "Studies", old: 1, new: 1 },
            { id: 68, name: "Loss Factor Assessment", category: "Studies", old: null, new: 1 },
            { id: 69, name: "Control Tuning", category: "Controls", old: null, new: 1 },
            { id: 70, name: "Harmonic Study", category: "Quality", old: 1, new: 1 },
            { id: 71, name: "Harmonic Filter Spec", category: "Quality", old: 1, new: 1 },
            { id: 72, name: "Protection Coordination", category: "Protection", old: null, new: 1 },
            { id: 73, name: "Script Development", category: "Automation", old: null, new: 2 },
            { id: 74, name: "Market Risk Review", category: "Commercial", old: null, new: 1 },
            { id: 75, name: "Connection Agreement DD", category: "Commercial", old: 1, new: 1 },
            { id: 76, name: "Ancillary Service DD", category: "Commercial", old: null, new: 1 },
            { id: 77, name: "Project Cost Estimate", category: "Commercial", old: 1, new: 2 },
            { id: 78, name: "Issue Resolution", category: "Management", old: null, new: 2 }
        ];

        const categories = ["Studies", "Modelling", "Validation", "Controls", "Automation", "Regulatory", "Commercial", "Management", "Design", "Commissioning", "Testing", "Operations", "Protection", "Quality", "Plant Tech", "Industrial"];

        const priorExperience = [
            "Line Design Engineer",
            "Substation Engineer (HV Switching)",
            "System Operations Engineer",
            "T&D Testing (6 Substations)",
            "Project Engineer (UG Cables)",
            "42 MW Wind Farm (TAS)",
            "900 MW Wind Farm (NSW)"
        ];

        const ScatterPlot = ({ data }) => {
            const [hoveredPoint, setHoveredPoint] = useState(null);

            const getCategoryX = (category) => {
                const idx = categories.indexOf(category);
                return ((idx + 0.5) / categories.length) * 100;
            };

            const getLevelY = (level) => ((level || 0) / 3) * 100;

            const getPointClass = (item) => {
                if (item.old === null) return 'new-skill';
                if (item.new > item.old) return 'upgraded';
                return 'current';
            };

            return (
                <div className="scatter-plot">
                    <span className="axis-label y-axis">Competency Level</span>
                    <span className="axis-label x-axis">Discipline Category</span>

                    {/* Grid lines */}
                    {[1, 2, 3].map(level => (
                        <div key={`h-${level}`} className="grid-line horizontal" style={{ bottom: `${getLevelY(level)}%` }}>
                            <span className="tick-label y" style={{ bottom: 0 }}>{level}</span>
                        </div>
                    ))}

                    {/* Reference lines */}
                    <div className="reference-line" style={{ bottom: `${getLevelY(2)}%` }}>
                        <span className="reference-label">Lead Engineer Req.</span>
                    </div>

                    {/* Category labels */}
                    {categories.map((cat, idx) => (
                        <span key={cat} className="tick-label x" style={{ left: `${getCategoryX(cat)}%` }}>
                            {cat}
                        </span>
                    ))}

                    {/* Previous level points */}
                    {data.filter(d => d.old !== null).map((item, idx) => (
                        <div
                            key={`prev-${item.id}`}
                            className="data-point previous"
                            style={{
                                left: `${getCategoryX(item.category) + ((item.id % 5) - 2) * 1.5}%`,
                                bottom: `${getLevelY(item.old)}%`
                            }}
                        />
                    ))}

                    {/* Current level points */}
                    {data.map((item, idx) => (
                        <div
                            key={`new-${item.id}`}
                            className={`data-point ${getPointClass(item)}`}
                            style={{
                                left: `${getCategoryX(item.category) + ((item.id % 5) - 2) * 1.5}%`,
                                bottom: `${getLevelY(item.new)}%`
                            }}
                            onMouseEnter={() => setHoveredPoint(item)}
                            onMouseLeave={() => setHoveredPoint(null)}
                        >
                            {hoveredPoint?.id === item.id && (
                                <div className="tooltip">
                                    {item.name}: {item.old ? `L${item.old}` : 'New'} → L{item.new}
                                </div>
                            )}
                        </div>
                    ))}
                </div>
            );
        };

        const RoleAlignment = ({ techCodes, actCodes }) => {
            const l2Count = [...techCodes, ...actCodes].filter(c => c.new >= 2).length;
            const l3Count = [...techCodes, ...actCodes].filter(c => c.new >= 3).length;
            const totalNew = [...techCodes, ...actCodes].filter(c => c.old === null).length;

            const roles = [
                { name: "Engineer", percent: Math.min(100, (l2Count / 1) * 100) },
                { name: "Senior Engineer", percent: Math.min(100, (l2Count / 1) * 100) },
                { name: "Lead Engineer", percent: Math.min(100, (l2Count / 4) * 50 + 50) },
                { name: "Principal Engineer", percent: Math.min(100, (l2Count / 6) * 60 + 40) },
                { name: "Senior Principal", percent: Math.min(100, (l3Count / 1) * 50 + (l2Count / 6) * 25) }
            ];

            return (
                <div className="role-alignment">
                    {roles.map(role => (
                        <div key={role.name} className="role-card">
                            <div className="role-name">{role.name}</div>
                            <div className="role-bar">
                                <div className="role-fill" style={{ width: `${role.percent}%` }} />
                                <div className="role-threshold" style={{ left: '100%' }} />
                            </div>
                            <div className={`role-percent ${role.percent >= 100 ? 'exceeds' : ''}`}>
                                {Math.round(role.percent)}%
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const CategorySummary = ({ data }) => {
            const catStats = categories.map(cat => {
                const items = data.filter(d => d.category === cat);
                return {
                    name: cat,
                    total: items.length,
                    l2Plus: items.filter(i => i.new >= 2).length,
                    newSkills: items.filter(i => i.old === null).length
                };
            }).filter(c => c.total > 0);

            return (
                <div className="category-summary">
                    {catStats.map(cat => (
                        <div key={cat.name} className="category-card">
                            <div className="category-name">{cat.name}</div>
                            <div className="category-stats">
                                <div className="cat-stat">
                                    <div className="cat-stat-value">{cat.l2Plus}</div>
                                    <div className="cat-stat-label">L2+</div>
                                </div>
                                <div className="cat-stat">
                                    <div className="cat-stat-value" style={{ color: '#4B81EF' }}>{cat.newSkills}</div>
                                    <div className="cat-stat-label">New</div>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const BarChartViz = ({ data, vizMode }) => (
            <div className="bar-chart-viz">
                {data.map((item, i) => (
                    <div key={i} className="bar-row-viz">
                        <div className="bar-label-viz" title={item.name}>{item.name}</div>
                        <div className="bar-container-viz">
                            {vizMode === 'movement' && item.old !== null && (
                                <div className="bar-previous-viz" style={{ width: `${(item.old / 3) * 100}%` }} />
                            )}
                            <div className={`bar-fill-viz l${item.new}`} style={{ width: `${(item.new / 3) * 100}%` }} />
                        </div>
                        <div className="bar-value-viz">
                            {vizMode === 'movement' && item.old !== null ? `${item.old}→${item.new}` : `L${item.new}`}
                        </div>
                    </div>
                ))}
            </div>
        );

        const App = () => {
            const [vizMode, setVizMode] = useState('current');
            const allData = [...technicalCodes, ...activityCodes];
            const upgradedCount = allData.filter(d => d.old !== null && d.new > d.old).length;
            const newSkillCount = allData.filter(d => d.old === null).length;
            const l2Count = allData.filter(d => d.new >= 2).length;

            return (
                <div>
                    <header className="header">
                        <div className="header-content">
                            <div className="logo">
                                <VysusLogo />
                                <span className="logo-text">Vysus Group</span>
                            </div>
                            <div className="header-title">
                                <h1>Engineering Competency Analysis</h1>
                                <p>Power Grid and Renewables | December 2024</p>
                            </div>
                        </div>
                    </header>

                    <main className="main-content">
                        <div className="profile-bar">
                            <div>
                                <h2 className="profile-name">
                                    Dominic Moncada
                                    <span className="self-assessment-badge">Self Assessment</span>
                                </h2>
                                <p style={{color: 'var(--vysus-scandinavia-rock)', fontSize: '12px', marginTop: '5px'}}>
                                    Projects: Corop SF & BESS, Upper Calliope SF, Templers Creek, Armidale, Haughton, Birdwood BESS
                                </p>
                            </div>
                            <div className="profile-meta">
                                <div className="meta-item">
                                    <div className="meta-value">{upgradedCount}</div>
                                    <div className="meta-label">Upgraded</div>
                                </div>
                                <div className="meta-item">
                                    <div className="meta-value" style={{color: 'var(--vysus-bath-sky)'}}>{newSkillCount}</div>
                                    <div className="meta-label">New Skills</div>
                                </div>
                                <div className="meta-item">
                                    <div className="meta-value">{l2Count}</div>
                                    <div className="meta-label">At L2+</div>
                                </div>
                                <div className="meta-item">
                                    <div className="meta-value">{allData.length}</div>
                                    <div className="meta-label">Total</div>
                                </div>
                            </div>
                        </div>

                        <div className="dashboard-grid">
                            <div className="chart-card full-width">
                                <h3 className="chart-title">Competency Distribution: Category (X) vs Level (Y)</h3>
                                <ScatterPlot data={allData} />
                                <div className="legend">
                                    <div className="legend-item">
                                        <div className="legend-dot previous"></div>
                                        <span>Previous Level (2025)</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-dot upgraded"></div>
                                        <span>Upgraded (L1→L2)</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-dot new-skill"></div>
                                        <span>New Skill for 2026</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-dot current"></div>
                                        <span>Maintained Level</span>
                                    </div>
                                </div>
                            </div>

                            <div className="chart-card">
                                <h3 className="chart-title">Role Alignment vs Framework</h3>
                                <RoleAlignment techCodes={technicalCodes} actCodes={activityCodes} />
                                <p style={{fontSize: '10px', color: 'var(--vysus-scandinavia-rock)', marginTop: '12px'}}>
                                    Based on Vysus Power Grid Competency Levels Rev 002
                                </p>
                            </div>

                            <div className="chart-card">
                                <h3 className="chart-title">Category Distribution</h3>
                                <CategorySummary data={allData} />
                            </div>

                            <div className="chart-card full-width">
                                <h3 className="chart-title">Key Progression Areas</h3>
                                <div className="progress-comparison">
                                    <div className="progress-section">
                                        <h4>Upgraded to Level 2 ({allData.filter(d => d.old !== null && d.new === 2 && d.old < 2).length})</h4>
                                        {allData.filter(d => d.old !== null && d.new === 2 && d.old < 2).slice(0, 10).map(item => (
                                            <div key={item.id} className="progress-item">
                                                <div className="progress-badge l2">L2</div>
                                                <div className="progress-name">{item.name}</div>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="progress-section">
                                        <h4>New Skills for 2026 ({newSkillCount})</h4>
                                        {allData.filter(d => d.old === null).slice(0, 10).map(item => (
                                            <div key={item.id} className="progress-item">
                                                <div className="progress-badge new">L{item.new}</div>
                                                <div className="progress-name">{item.name}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            <div className="chart-card full-width">
                                <h3 className="chart-title">Bar Chart View - Technical & Activity Codes</h3>
                                <div className="viz-toggle">
                                    <button className={`viz-btn ${vizMode === 'current' ? 'active' : ''}`} onClick={() => setVizMode('current')}>Current Levels</button>
                                    <button className={`viz-btn ${vizMode === 'movement' ? 'active' : ''}`} onClick={() => setVizMode('movement')}>Movement</button>
                                    <button className={`viz-btn ${vizMode === 'newskills' ? 'active' : ''}`} onClick={() => setVizMode('newskills')}>New Skills Only</button>
                                </div>
                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px' }}>
                                    <div>
                                        <h4 style={{ color: 'var(--vysus-malmo-green)', fontSize: '13px', marginBottom: '12px' }}>Technical Codes ({technicalCodes.length})</h4>
                                        <BarChartViz data={vizMode === 'newskills' ? technicalCodes.filter(c => c.old === null) : technicalCodes} vizMode={vizMode} />
                                    </div>
                                    <div>
                                        <h4 style={{ color: 'var(--vysus-malmo-green)', fontSize: '13px', marginBottom: '12px' }}>Activity Codes ({activityCodes.length})</h4>
                                        <BarChartViz data={vizMode === 'newskills' ? activityCodes.filter(c => c.old === null) : activityCodes} vizMode={vizMode} />
                                    </div>
                                </div>
                                <div className="legend" style={{ marginTop: '15px' }}>
                                    <div className="legend-item"><div className="legend-dot" style={{ background: 'var(--vysus-bergen-rain)' }}></div><span>Level 1</span></div>
                                    <div className="legend-item"><div className="legend-dot current"></div><span>Level 2</span></div>
                                    <div className="legend-item"><div className="legend-dot" style={{ background: 'var(--vysus-malmo-green)' }}></div><span>Level 3</span></div>
                                    {vizMode === 'movement' && <div className="legend-item"><div style={{ width: '20px', borderRight: '3px solid var(--vysus-scandinavia-rock)' }}></div><span>Previous Level</span></div>}
                                </div>
                            </div>

                            <div className="chart-card full-width">
                                <h3 className="chart-title">Prior Experience (Pre-Vysus)</h3>
                                <div className="exp-tags">
                                    {priorExperience.map(exp => (
                                        <span key={exp} className="exp-tag">{exp}</span>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </main>

                    <footer className="footer">
                        <p className="tagline">Ingenuity. Imagination. Insight.</p>
                        <p>Vysus Group - Power Grid and Renewables</p>
                    </footer>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
